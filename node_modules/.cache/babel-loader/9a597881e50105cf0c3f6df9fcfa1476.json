{"ast":null,"code":"import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}","map":{"version":3,"sources":["../../../../src/classes/base/vector.ts"],"names":["x","checkNumber","y","len","Math","magnitude","lengthSquared","length","i","magnitudeSquared","distance","distanceSquared","dist","mathArray","dot","product","normalize","multiply","vector","divide","lengthSq","distanceTo","distanceToSquared","getComponent","assert","setComponent","addVectors","subVectors","multiplyVectors","addScaledVector"],"mappings":"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","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n// MIT License\nimport {NumericArray} from '@math.gl/types';\nimport MathArray from './math-array';\nimport {checkNumber} from '../../lib/validators';\nimport assert from '../../lib/assert';\n\n/** Base class for vectors with at least 2 elements */\nexport default abstract class Vector extends MathArray {\n  // ACCESSORS\n\n  get x(): number {\n    return this[0];\n  }\n\n  set x(value: number) {\n    this[0] = checkNumber(value);\n  }\n\n  get y(): number {\n    return this[1];\n  }\n\n  set y(value: number) {\n    this[1] = checkNumber(value);\n  }\n\n  /**\n   * Returns the length of the vector from the origin to the point described by this vector\n   *\n   * @note `length` is a reserved word for Arrays, so `v.length()` will return number of elements\n   * Instead we provide `len` and `magnitude`\n   */\n  len(): number {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  /**\n   * Returns the length of the vector from the origin to the point described by this vector\n   */\n  magnitude(): number {\n    return this.len();\n  }\n\n  /**\n   * Returns the squared length of the vector from the origin to the point described by this vector\n   */\n  lengthSquared(): number {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n    return length;\n  }\n\n  /**\n   * Returns the squared length of the vector from the origin to the point described by this vector\n   */\n  magnitudeSquared(): number {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray: Readonly<NumericArray>): number {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray: Readonly<NumericArray>): number {\n    let length = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n    return checkNumber(length);\n  }\n\n  dot(mathArray: Readonly<NumericArray>): number {\n    let product = 0;\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n    return checkNumber(product);\n  }\n\n  // MODIFIERS\n\n  normalize(): this {\n    const length = this.magnitude();\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n    return this.check();\n  }\n\n  multiply(...vectors: Readonly<NumericArray>[]): this {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  divide(...vectors: Readonly<NumericArray>[]): this {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n    return this.check();\n  }\n\n  // THREE.js compatibility\n\n  lengthSq(): number {\n    return this.lengthSquared();\n  }\n  distanceTo(vector: Readonly<NumericArray>): number {\n    return this.distance(vector);\n  }\n  distanceToSquared(vector: Readonly<NumericArray>): number {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i: number): number {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i: number, value: number): this {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a: Readonly<NumericArray>, b: Readonly<NumericArray>): this {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a: Readonly<NumericArray>, b: number): this {\n    // @ts-expect-error error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}