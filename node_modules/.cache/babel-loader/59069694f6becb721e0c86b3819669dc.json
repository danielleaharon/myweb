{"ast":null,"code":"/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n\n/* eslint-disable */\n\n/* Hammer.js constants */\nconst INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\n\nfunction some(array, predict) {\n  for (let i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/* eslint-disable no-invalid-this */\n\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  const oldHandler = PointerEventInput.prototype.handler; // overrides PointerEventInput.handler to accept right mouse button\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    const store = this.store; // Allow non-left mouse buttons through\n\n    if (ev.button > 0 && ev.type === 'pointerdown') {\n      if (!some(store, e => e.pointerId === ev.pointerId)) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n} // overrides MouseInput.handler to accept right mouse button\n\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    let eventType = MOUSE_INPUT_MAP[ev.type]; // on start we want to have the mouse button down\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    } // mouse must be down\n\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}","map":{"version":3,"sources":["../../../src/utils/hammer-overrides.ts"],"names":[],"mappings":"AAAA;;;;;AAIA;;AAEA;AACA,MAAM,WAAW,GAAG,CAApB;AACA,MAAM,UAAU,GAAG,CAAnB;AACA,MAAM,SAAS,GAAG,CAAlB;AACA,MAAM,eAAe,GAAG;AACtB,EAAA,SAAS,EAAE,WADW;AAEtB,EAAA,SAAS,EAAE,UAFW;AAGtB,EAAA,OAAO,EAAE;AAHa,CAAxB;AAMA;;;;;;;AAMA,SAAS,IAAT,CAAc,KAAd,EAAqB,OAArB,EAA4B;AAC1B,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,CAAC,MAA1B,EAAkC,CAAC,EAAnC,EAAuC;AACrC,QAAI,OAAO,CAAC,KAAK,CAAC,CAAD,CAAN,CAAX,EAAuB;AACrB,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD;AAED;;;AACA,OAAM,SAAU,wBAAV,CAAmC,iBAAnC,EAAoD;AACxD,QAAM,UAAU,GAAG,iBAAiB,CAAC,SAAlB,CAA4B,OAA/C,CADwD,CAGxD;;AACA,EAAA,iBAAiB,CAAC,SAAlB,CAA4B,OAA5B,GAAsC,SAAS,OAAT,CAAiB,EAAjB,EAAmB;AACvD,UAAM,KAAK,GAAG,KAAK,KAAnB,CADuD,CAGvD;;AACA,QAAI,EAAE,CAAC,MAAH,GAAY,CAAZ,IAAiB,EAAE,CAAC,IAAH,KAAY,aAAjC,EAAgD;AAC9C,UAAI,CAAC,IAAI,CAAC,KAAD,EAAQ,CAAC,IAAI,CAAC,CAAC,SAAF,KAAgB,EAAE,CAAC,SAAhC,CAAT,EAAqD;AACnD,QAAA,KAAK,CAAC,IAAN,CAAW,EAAX;AACD;AACF;;AAED,IAAA,UAAU,CAAC,IAAX,CAAgB,IAAhB,EAAsB,EAAtB;AACD,GAXD;AAYD,C,CAED;;AACA,OAAM,SAAU,iBAAV,CAA4B,UAA5B,EAAsC;AAC1C,EAAA,UAAU,CAAC,SAAX,CAAqB,OAArB,GAA+B,SAAS,OAAT,CAAiB,EAAjB,EAAmB;AAChD,QAAI,SAAS,GAAG,eAAe,CAAC,EAAE,CAAC,IAAJ,CAA/B,CADgD,CAGhD;;AACA,QAAI,SAAS,GAAG,WAAZ,IAA2B,EAAE,CAAC,MAAH,IAAa,CAA5C,EAA+C;AAC7C,WAAK,OAAL,GAAe,IAAf;AACD;;AAED,QAAI,SAAS,GAAG,UAAZ,IAA0B,EAAE,CAAC,KAAH,KAAa,CAA3C,EAA8C;AAC5C,MAAA,SAAS,GAAG,SAAZ;AACD,KAV+C,CAYhD;;;AACA,QAAI,CAAC,KAAK,OAAV,EAAmB;AACjB;AACD;;AAED,QAAI,SAAS,GAAG,SAAhB,EAA2B;AACzB,WAAK,OAAL,GAAe,KAAf;AACD;;AAED,SAAK,QAAL,CAAc,KAAK,OAAnB,EAA4B,SAA5B,EAAuC;AACrC,MAAA,QAAQ,EAAE,CAAC,EAAD,CAD2B;AAErC,MAAA,eAAe,EAAE,CAAC,EAAD,CAFoB;AAGrC,MAAA,WAAW,EAAE,OAHwB;AAIrC,MAAA,QAAQ,EAAE;AAJ2B,KAAvC;AAMD,GA3BD;AA4BD","sourceRoot":"","sourcesContent":["/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n/* eslint-disable */\n/* Hammer.js constants */\nconst INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\nfunction some(array, predict) {\n    for (let i = 0; i < array.length; i++) {\n        if (predict(array[i])) {\n            return true;\n        }\n    }\n    return false;\n}\n/* eslint-disable no-invalid-this */\nexport function enhancePointerEventInput(PointerEventInput) {\n    const oldHandler = PointerEventInput.prototype.handler;\n    // overrides PointerEventInput.handler to accept right mouse button\n    PointerEventInput.prototype.handler = function handler(ev) {\n        const store = this.store;\n        // Allow non-left mouse buttons through\n        if (ev.button > 0 && ev.type === 'pointerdown') {\n            if (!some(store, e => e.pointerId === ev.pointerId)) {\n                store.push(ev);\n            }\n        }\n        oldHandler.call(this, ev);\n    };\n}\n// overrides MouseInput.handler to accept right mouse button\nexport function enhanceMouseInput(MouseInput) {\n    MouseInput.prototype.handler = function handler(ev) {\n        let eventType = MOUSE_INPUT_MAP[ev.type];\n        // on start we want to have the mouse button down\n        if (eventType & INPUT_START && ev.button >= 0) {\n            this.pressed = true;\n        }\n        if (eventType & INPUT_MOVE && ev.which === 0) {\n            eventType = INPUT_END;\n        }\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: 'mouse',\n            srcEvent: ev\n        });\n    };\n}\n//# sourceMappingURL=hammer-overrides.js.map"]},"metadata":{},"sourceType":"module"}